# unix-xv6

本项目基于 MIT 大学开发的一个类Unix操作系统xv6，原项目地址git://g.csail.mit.edu/xv6-labs-2021

目前，本项目对xv6操作系统进行了一些优化与拓展，各改动详见具体分支

| 分支                   | 具体内容                                                                                            |
| -------------------- | ----------------------------------------------------------------------------------------------- |
| code-comment-version | 对原xv6操作系统进行精读，并作中文注释                                                                            |
| traps                | 1、backtrace(), 打印当前函数递归的返回地址ra，适用崩溃时panic触发。<br>2、系统级异步信号机制实现，alarmer使用时间片回调，直接控制PC寄存器进行执行地址切换。 |
| pgtbl                | 实现管目态共享页表（sysinfo）、进程独立的内核页表（可直接接引用户虚拟地址va，高效安全）                                                |
| cow                  | 利用页中断（软中断），实现了fork时物理页的写时复制                                                                     |
| lock                 | 内存管理结构（物理页空闲链表）的锁优化。缓存块优化锁结构，hash桶方式降低锁颗粒度，使用驱逐锁、二次检查->避免了ABBA、AA死锁与重复副本创建问题                    |
| fs                   | 扩大单文件SIZE最大支持大小、实现软链接、内存映射文件mmap                                                                |
| mmap                 | 实现内存映射文件，包括懒加载与自动写回                                                                             |
